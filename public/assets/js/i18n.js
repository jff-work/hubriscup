
window.I18N = {
  lang: localStorage.getItem('lang') || 'de',
  dict: {
    de: {
      welcome: "Willkommen beim Hubris Cup {YEAR}",
      selectPlayer: "Wer bist du? Tippe auf deinen Namen:",
      changePlayer: "Spieler wechseln",
      checkin: "Check-in",
      checkedIn: "Eingecheckt",
      notCheckedIn: "Nicht eingecheckt",
      yourSeat: "Dein Draftsitz: Pod {POD}, Platz {SEAT}",
      draftOrder: "Draft-Reihenfolge",
      currentRound: "Runde",
      table: "Tisch",
      opponent: "Gegner",
      result: "Ergebnis",
      enter: "Eintragen",
      confirm: "Bestätigen",
      dropNote: "Zum Drop bitte direkt mit der Turnierleitung sprechen.",
      standings: "Zwischenstand",
      adminPanel: "Admin",
      addPlayer: "Spieler hinzufügen",
      startEvent: "Turnier starten",
      createPods: "Pods erstellen",
      createR1: "Pairings Runde 1",
      nextRound: "Nächste Runde",
      createNextRound: "Nächste Runde erstellen",
      finalize: "Finale Rangliste vor Top 8",
      createTop8: "Top 8 Draft erstellen",
      top8: "Top 8",
      locale: "Sprache",
      german: "Deutsch",
      english: "Englisch",
      warningUnchecked: "Achtung: Nicht alle Spieler sind eingecheckt. Fortfahren? Nicht eingecheckte werden entfernt.",
      checkinButton: "Ich bin da",
      myTable: "Dein Tisch",
      debug: "Debug",
      populate: "Mit X Spielern befüllen",
      copyResults: "Ergebnisse automatisch bestätigen",
      checkinAll: "Alle restlichen einchecken",
      eventName: "Eventname",
      save: "Speichern",
      players: "Spieler",
      actions: "Aktionen",
      remove: "Entfernen",
      seat: "Platz",
      pod: "Pod",
      points: "Punkte",
      omw: "OMW%",
      gwp: "GWP%",
      ogw: "OGW%",
      qf: "Viertelfinale",
      sf: "Halbfinale",
      f: "Finale",
      congrats: "Glückwunsch an den Sieger!",
      noPhone: "Kein Handy",
      noPhoneExplain: "Orange = Spieler ohne Handy; Ergebnisse müssen manuell von der Turnierleitung eingetragen werden.",
      randomize: "Ergebnisse zufällig setzen",
      manualOnly: "Dieser Spieler ist auf manuelle Ergebniseingabe gesetzt. Bitte TO informieren.",
      newEvent: "Neues Event",
      confirmNewEvent: "Alle Daten löschen und neues Event starten? Diese Aktion kann nicht rückgängig gemacht werden.",
      waitingForTournament: "Bitte warten, bis das Turnier gestartet wird.",
      tournamentNotStarted: "Das Turnier wurde noch nicht gestartet."
    },
    en: {
      welcome: "Welcome to Hubris Cup {YEAR}",
      selectPlayer: "Who are you? Tap your name:",
      changePlayer: "Change player",
      checkin: "Check-in",
      checkedIn: "Checked in",
      notCheckedIn: "Not checked in",
      yourSeat: "Your draft seat: Pod {POD}, Seat {SEAT}",
      draftOrder: "Draft order",
      currentRound: "Round",
      table: "Table",
      opponent: "Opponent",
      result: "Result",
      enter: "Enter",
      confirm: "Confirm",
      dropNote: "To drop, please speak to the TO directly.",
      standings: "Standings",
      adminPanel: "Admin",
      addPlayer: "Add player",
      startEvent: "Start tournament",
      createPods: "Create pods",
      createR1: "Create Round 1",
      nextRound: "Next round",
      createNextRound: "Create next round",
      finalize: "Create final standings before Top 8",
      createTop8: "Create Top 8 draft",
      top8: "Top 8",
      locale: "Language",
      german: "German",
      english: "English",
      warningUnchecked: "Warning: not all players are checked-in. Continue? Unchecked players will be removed.",
      checkinButton: "I’m here",
      myTable: "Your table",
      debug: "Debug",
      populate: "Populate with X players",
      copyResults: "Auto‑confirm results",
      checkinAll: "Check-in remaining",
      eventName: "Event name",
      save: "Save",
      players: "Players",
      actions: "Actions",
      remove: "Remove",
      seat: "Seat",
      pod: "Pod",
      points: "Points",
      omw: "OMW%",
      gwp: "GWP%",
      ogw: "OGW%",
      qf: "Quarterfinals",
      sf: "Semifinals",
      f: "Finals",
      congrats: "Congratulations to the winner!",
      noPhone: "No phone",
      noPhoneExplain: "Orange = player without phone; results must be entered manually by the TO.",
      randomize: "Randomize results",
      manualOnly: "This player is set to manual result entry. Please inform the TO.",
      newEvent: "New Event",
      confirmNewEvent: "Delete all data and start new event? This action cannot be undone.",
      waitingForTournament: "Please wait until the tournament is launched.",
      tournamentNotStarted: "The tournament has not been started yet."
    }
  },
  t(key, vars={}){
    const s = (this.dict[this.lang] && this.dict[this.lang][key]) || key;
    return s.replace(/\{(\w+)\}/g, (_,k)=> vars[k] ?? '');
  },
  setLang(l){
    this.lang = l; localStorage.setItem('lang', l); document.dispatchEvent(new CustomEvent('langchange'));
  }
};
